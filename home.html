<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krish Sharma - Portfolio OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lora:wght@400;500;600&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent-color: #22d3ee;
            --accent-color-text: #67e8f9;
            --accent-bg-subtle: rgba(34, 211, 238, 0.2);

            --bg-primary-rgb: 17, 24, 39;
            --bg-secondary-rgb: 17, 24, 39;
            --bg-tertiary-rgb: 31, 41, 55;

            --text-primary: #d1d5db;
            --text-secondary: #9ca3af;
            --border-color: rgba(55, 65, 81, 0.5);
            --top-bar-bg: rgba(0, 0, 0, 0.1);
            --desktop-clock-text: white;

            /* New Customizable Properties */
            --font-primary: 'Inter', sans-serif;
            --window-blur: 20px;
            --window-bg-opacity: 0.6;
            --bg-primary: rgba(var(--bg-primary-rgb), var(--window-bg-opacity));
            --bg-secondary: rgba(var(--bg-secondary-rgb), 0.8);
            --bg-tertiary: rgba(var(--bg-tertiary-rgb), 0.5);
        }

        .light-theme {
            --bg-primary-rgb: 255, 255, 255;
            --bg-secondary-rgb: 249, 250, 251;
            --bg-tertiary-rgb: 243, 244, 246;

            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --border-color: rgba(0, 0, 0, 0.12);
            --top-bar-bg: rgba(255, 255, 255, 0.4);
            --desktop-clock-text: #1f2937;
            --window-bg-opacity: 0.9;
        }

        body {
            font-family: var(--font-primary);
            overflow: hidden;
        }

        /* --- macOS Inspired Login Screen --- */
        #login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease-in-out, visibility 0.8s;
            opacity: 1;
            visibility: visible;
            overflow: hidden;
        }

        #login-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            /* Important: Prevents blocking clicks after hiding */
        }

        .hello-container {
            position: absolute;
            opacity: 0;
            transform: scale(1.1);
            transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
        }

        .hello-container.visible {
            opacity: 1;
            transform: scale(1);
        }

        #hello-text {
            font-family: 'Inter', cursive;
            font-weight: 300;
            font-size: clamp(4rem, 15vw, 10rem);
            color: #ffffff;
        }

        .author {
            font-family: 'Courier New', sans-serif;
            /* Different font for contrast */
            font-size: 1.36rem;
            /* Slightly smaller */
            font-weight: 650;
            /* Optional for visual hierarchy */
            color: #ffffff;
            /* Subtle grey tone */
            margin-left: 8px;
            /* Space between title and name */
        }



        .progress-container {
            width: 250px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .loading-logo {
            width: 140px;
            margin-bottom: 0.9rem;
        }

        .progress-container.visible {
            opacity: 1;
        }

        .progress-title {
            font-family: 'Space Mono', monospace;
            color: #fff;
            font-size: 1.55rem;
            margin-bottom: 1rem;
            letter-spacing: 0.2em;
        }

        .progress-bar-outer {
            width: 100%;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 2.5px;
            overflow: hidden;
        }

        .progress-bar-inner {
            width: 0;
            height: 100%;
            background-color: #fff;
            box-shadow: 0 0 10px #fff;
            border-radius: 2.5px;
            transition: width 2s ease-out;
        }

        .desktop {
            background-image: url('img/bg4.jpg');
            background-size: cover;
            background-position: center;
            height: 100vh;
            width: 100vw;
            position: relative;
            transition: background-image 0.5s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #desktop-clock-widget {
            color: var(--desktop-clock-text);
            text-align: center;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            user-select: none;
            transition: opacity 0.3s ease-in-out, color 0.3s ease-in-out;
        }

        .light-theme #desktop-clock-widget {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        #desktop-time {
            font-family: 'Space Mono', monospace;
            font-size: 7rem;
            font-weight: 700;
            line-height: 1;
        }

        #desktop-date {
            font-size: 1.5rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .window {
            min-width: 320px;
            min-height: 200px;
            position: absolute;
            border-radius: 0.75rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
            display: none;
            /* resize property is now handled by JS */
            overflow: hidden;
            /* Changed from visible to hidden */
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            backdrop-filter: blur(var(--window-blur)) saturate(180%);
            -webkit-backdrop-filter: blur(var(--window-blur)) saturate(180%);
            transition: width 0.3s ease, height 0.3s ease, top 0.3s ease, left 0.3s ease, background-color 0.3s, backdrop-filter 0.3s;
        }

        .window.is-dragging {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            transition: none;
            opacity: 0.85;
        }

        .title-bar {
            cursor: move;
            user-select: none;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-left: 0.75rem;
            padding-right: 0.75rem;
            position: relative;
        }

        .content {
            overflow-y: auto;
            height: calc(100% - 2.5rem);
            position: relative;
            color: var(--text-primary);
        }

        .content-grid-bg {
            background-color: var(--bg-secondary);
            background-image:
                linear-gradient(var(--border-color) 1px, transparent 1px),
                linear-gradient(to right, var(--border-color) 1px, transparent 1px);
            background-size: 2rem 2rem;
        }

        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background-color: var(--top-bar-bg);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
            transition: background-color 0.3s ease-in-out;
        }

        .bottom-dock {
            position: absolute;
            background-color: rgba(17, 24, 39, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-color);
            border-radius: 1.25rem;
            padding: 0.5rem;
            display: flex;
            z-index: 1000;
            transition: all 0.3s ease-in-out;
            bottom: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            flex-direction: row;
            gap: 0.5rem;
        }

        .dock-item {
            width: 64px;
            height: 64px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding-top: 4px;
        }

        .dock-item:hover {
            background-color: rgba(55, 65, 81, 0.7);
            transform: scale(1.1);
        }

        .dock-item i {
            font-size: 24px;
            color: #d1d5db;
        }

        .dock-item:hover i {
            color: white;
        }

        .dock-item .dock-item-label {
            font-size: 11px;
            color: var(--text-primary);
            margin-top: 4px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .dock-item .active-dot {
            position: absolute;
            bottom: 4px;
            width: 6px;
            height: 6px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: none;
        }

        .dock-item.active .active-dot {
            display: block;
        }

        .clock-font {
            font-family: 'Space Mono', monospace;
        }

        .wallpaper-thumb {
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }

        .wallpaper-thumb:hover,
        .wallpaper-thumb.active {
            border-color: var(--accent-color);
        }

        .window-controls {
            display: flex;
            gap: 0.5rem;
        }

        .window-control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .window-control.close {
            background-color: #ef4444;
        }

        .window-control.minimize {
            background-color: #f59e0b;
        }

        .window-control.maximize {
            background-color: #22c55e;
        }

        /* Snap Layouts */
        .snap-layouts {
            display: none;
            position: absolute;
            top: 1.75rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(31, 41, 55, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.5rem;
            z-index: 100;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            width: 120px;
        }

        .snap-option {
            width: 50px;
            height: 35px;
            background: rgba(75, 85, 99, 0.5);
            border: 1px solid rgba(107, 114, 128, 0.5);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: background-color 0.2s;
            position: relative;
        }

        .snap-option:hover {
            background-color: rgba(107, 114, 128, 0.7);
        }

        .snap-preview {
            position: absolute;
            background-color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        /* Start Menu */
        #start-menu {
            display: none;
            position: absolute;
            bottom: 6.5rem;
            left: 1.5rem;
            background-color: var(--bg-primary);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 0.5rem;
            width: 250px;
            border: 1px solid var(--border-color);
            z-index: 999;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }

        #start-menu-search {
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: rgba(23, 23, 23, 0.135);
            border: none;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            outline: none;
        }

        #start-menu-apps {
            max-height: 300px;
            overflow-y: auto;
        }

        .start-menu-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }

        .start-menu-item:hover {
            background-color: var(--accent-bg-subtle);
            color: var(--accent-color-text);
        }

        .start-menu-item i {
            width: 20px;
            margin-right: 0.75rem;
        }

        /* Terminal Specific Styles */
        #terminal-output {
            white-space: pre-wrap;
            word-break: break-all;
        }

        .terminal-prompt {
            display: flex;
        }

        #terminal-input::after {
            content: '|';
            color: #4ade80;
            opacity: 0;
        }

        #terminal-window:focus-within #terminal-input::after {
            opacity: 1;
            animation: blink 1s step-end infinite;
        }

        .accent-text {
            color: var(--accent-color-text);
        }

        .accent-border {
            border-color: var(--accent-color);
        }

        .accent-bg-subtle {
            background-color: var(--accent-bg-subtle);
        }

        /* --- Projects App Enhancement --- */
        .project-card {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-radius: 0.75rem;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px var(--accent-bg-subtle), 0 5px 15px rgba(0, 0, 0, 0.2);
            border-color: var(--accent-color);
        }

        .project-card .project-image-container {
            overflow: hidden;
            position: relative;
        }

        .project-card .project-image {
            transition: transform 0.4s ease;
        }

        .project-card:hover .project-image {
            transform: scale(1.05);
        }

        .project-card .project-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: linear-gradient(to top, rgba(17, 24, 39, 0.95) 20%, transparent 100%);
        }

        .project-card .project-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 1rem;
            background: linear-gradient(to top, rgba(17, 24, 39, 1) 0%, rgba(17, 24, 39, 0.7) 70%, transparent 100%);
            transform: translateY(100%);
            transition: transform 0.4s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
        }

        .project-card:hover .project-overlay {
            transform: translateY(0);
        }

        .project-card .project-title {
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        .project-card .project-links a {
            color: var(--accent-color-text);
            transition: color 0.2s;
        }

        .project-card .project-links a:hover {
            color: white;
        }

        /* --- Achievements App Enhancement --- */
        .achievement-item {
            background-color: var(--bg-tertiary);
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            padding: 1.25rem;
            display: flex;
            gap: 1.25rem;
            align-items: center;
            transition: all 0.3s ease;
        }

        .achievement-item:hover {
            transform: translateY(-4px) scale(1.02);
            background-color: rgba(55, 65, 81, 0.7);
            border-color: var(--accent-color);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .achievement-icon {
            font-size: 2rem;
            color: var(--accent-color-text);
            width: 50px;
            flex-shrink: 0;
            text-align: center;
            filter: drop-shadow(0 0 8px var(--accent-bg-subtle));
        }

        .achievement-details h3 {
            font-weight: 600;
            color: var(--text-primary);
        }

        .achievement-details p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .achievement-progress {
            width: 100%;
            height: 4px;
            background-color: var(--border-color);
            border-radius: 2px;
            margin-top: 0.75rem;
            overflow: hidden;
        }

        .achievement-progress-bar {
            width: 100%;
            height: 100%;
            background-color: var(--accent-color);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease-out;
        }

        .achievement-item:hover .achievement-progress-bar {
            transform: scaleX(1);
        }

        /* --- Contact App Enhancement --- */
        #contact-window .content {
            background-color: var(--bg-secondary);
        }

        #contact-form input,
        #contact-form textarea {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
            padding: 0.75rem;
        }

        #contact-form input:focus,
        #contact-form textarea:focus {
            border-color: var(--accent-color);
            background-color: var(--bg-primary);
            box-shadow: 0 0 0 2px var(--accent-bg-subtle);
        }

        #contact-form button {
            background-image: linear-gradient(to right, var(--accent-color), var(--accent-color-text));
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px -5px var(--accent-bg-subtle);
        }

        #contact-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px -5px var(--accent-bg-subtle);
            filter: brightness(1.1);
        }

        /* --- Social App Enhancement --- */
        #social-window .content {
            padding: 1rem;
        }

        .social-link {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.2s ease-out;
        }

        .social-link:hover {
            background-color: var(--accent-bg-subtle);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .social-link .fab,
        .social-link .fas {
            font-size: 1.75rem;
            color: var(--accent-color-text);
            width: 30px;
            text-align: center;
        }

        .social-link span {
            font-weight: 500;
            flex-grow: 1;
        }

        .social-link .external-icon {
            color: var(--text-secondary);
            transition: color 0.2s;
        }

        .social-link:hover .external-icon {
            color: var(--text-primary);
        }

        /* --- Settings App Enhancement --- */
        .settings-section {
            background-color: var(--bg-tertiary);
            border-radius: 0.5rem;
            padding: 1rem;
            border: 1px solid var(--border-color);
        }

        .settings-section h3 {
            font-size: 1rem;
            font-weight: 600;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .segmented-control {
            background-color: var(--bg-secondary);
            border-radius: 0.5rem;
            display: flex;
            padding: 0.25rem;
        }

        .segmented-control button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 0.375rem;
            border: none;
            background-color: transparent;
            color: var(--text-secondary);
            transition: all 0.2s;
            font-weight: 500;
        }

        .segmented-control button.active {
            background-color: var(--accent-color);
            color: #111827;
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        #accent-color-options button {
            position: relative;
        }

        #accent-color-options button.active::after {
            content: '\f00c';
            /* Font Awesome check icon */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(0, 0, 0, 0.7);
        }

        #reset-ui {
            background-color: #ef4444;
            border: 1px solid transparent;
            transition: all 0.2s;
        }

        #reset-ui:hover {
            background-color: #dc2626;
            border-color: #f87171;
        }

        .slider-control {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .slider-control label {
            flex-shrink: 0;
            width: 60px;
        }

        .slider-control input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 4px;
            background: var(--border-color);
            outline: none;
            border-radius: 2px;
        }

        .slider-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-color);
            cursor: pointer;
            border-radius: 50%;
        }

        .slider-control input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent-color);
            cursor: pointer;
            border-radius: 50%;
        }

        /* --- BLOG STYLES --- */
        .blog-post-list a {
            display: block;
            padding: 1rem;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }

        .blog-post-list a:hover {
            background-color: var(--accent-bg-subtle);
            border-left-color: var(--accent-color);
        }

        .blog-post-list a.active {
            background-color: var(--accent-bg-subtle);
            border-left-color: var(--accent-color);
            color: var(--accent-color-text);
        }

        .blog-post-list a .post-meta {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .blog-content-area {
            background-color: var(--bg-secondary);
        }

        .blog-header {
            position: relative;
            height: 220px;
            width: 100%;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 1.5rem;
        }

        .blog-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.1) 100%);
            z-index: 1;
        }

        .blog-header-content {
            position: relative;
            z-index: 2;
        }

        .blog-header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            margin: 0;
            line-height: 1.2;
        }

        .blog-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.875rem;
            margin-top: 0.75rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        .blog-article {
            padding: 2rem;
            font-size: 1.05rem;
            line-height: 1.7;
            color: var(--text-primary);
        }

        .light-theme .blog-article {
            color: var(--text-primary);
        }

        .blog-article p {
            margin-bottom: 1.5rem;
        }

        .blog-tags {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .blog-tag {
            background-color: var(--accent-bg-subtle);
            color: var(--accent-color-text);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* --- Task Manager Styles --- */
        #taskmanager-table {
            width: 100%;
            border-collapse: collapse;
        }

        #taskmanager-table th,
        #taskmanager-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        #taskmanager-table th {
            background-color: var(--bg-tertiary);
            font-weight: 600;
        }

        .end-task-btn {
            background-color: #ef4444;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background-color 0.2s;
        }

        .end-task-btn:hover {
            background-color: #dc2626;
        }

        /* Chatbot Styles */
        #chatbot-messages {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding: 1rem;
        }

        .chat-message {
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            max-width: 80%;
            line-height: 1.4;
        }

        .chat-message.user {
            background-color: var(--accent-color);
            color: #111827;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
        }

        .chat-message.bot {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            align-self: flex-start;
            border-bottom-left-radius: 0.25rem;
        }

        #chatbot-input-form {
            display: flex;
            padding: 0.5rem;
            border-top: 1px solid var(--border-color);
        }

        #chatbot-input {
            flex-grow: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            padding: 0 0.5rem;
        }

        /* Game Styles */
        #game-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            background-color: #000;
        }

        #snake-canvas {
            background-color: #111;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
        }

        #game-info {
            width: 400px;
            display: flex;
            justify-content: space-between;
            color: white;
            font-family: 'Space Mono', monospace;
            margin-bottom: 1rem;
        }

        #game-over-text {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
        }

        #game-over-text span {
            font-size: 1rem;
            display: block;
            margin-top: 0.5rem;
            font-weight: normal;
        }

        /* Bottom Left Controls */
        #bottom-left-controls {
            position: fixed;
            bottom: 1.5rem;
            left: 1.5rem;
            z-index: 1001;
            display: flex;
            gap: 0.5rem;
            background-color: rgba(17, 24, 39, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 1.25rem;
            padding: 0.5rem;
            transition: all 0.3s ease-in-out;
        }

        #bottom-left-controls.center-bottom {
            left: 50%;
            transform: translateX(-50%);
        }

        .control-button {
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #d1d5db;
            font-size: 24px;
        }

        .control-button:hover {
            background-color: rgba(55, 65, 81, 0.7);
            color: white;
        }

        /* Resizer Handle */
        .resizer {
            width: 15px;
            height: 15px;
            position: absolute;
            right: 0;
            bottom: 0;
            cursor: se-resize;
            z-index: 10;
        }

        /* BSOD Styles */
        #bsod-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #0078D7;
            color: white;
            font-family: 'Consolas', 'Courier New', monospace;
            display: none;
            flex-direction: column;
            justify-content: center;
            padding: 5vw;
            z-index: 10000;
        }

        #bsod-emoticon {
            font-size: 8rem;
            line-height: 1;
        }

        #bsod-text h1 {
            font-size: 1.5rem;
            margin-top: 2rem;
            font-weight: normal;
        }

        #bsod-text p {
            font-size: 1rem;
            margin-top: 1rem;
        }

        #bsod-qr {
            width: 120px;
            height: 120px;
            margin-top: 2rem;
        }

        /* --- Light Theme Overrides --- */
        .light-theme .window .content {
            background-color: #ffffff;
        }

        .light-theme .window .content-grid-bg {
            background-image: none;
        }

        .light-theme .window .title-bar {
            background-color: rgba(var(--bg-tertiary-rgb), 0.8);
        }

        .light-theme .window .title-bar span {
            color: var(--text-primary);
        }

        .light-theme .bottom-dock,
        .light-theme #bottom-left-controls {
            background-color: rgba(243, 244, 246, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .light-theme .dock-item:hover {
            background-color: rgba(229, 231, 235, 0.8);
        }

        .light-theme .dock-item i,
        .light-theme .control-button {
            color: #374151;
        }

        .light-theme .dock-item:hover i,
        .light-theme .control-button:hover {
            color: #111827;
        }

        .light-theme .dock-item .dock-item-label {
            color: var(--text-primary);
            text-shadow: none;
        }

        .light-theme .control-button:hover {
            background-color: rgba(229, 231, 235, 0.7);
        }

        .light-theme .snap-layouts {
            background: rgba(249, 250, 251, 0.95);
        }

        .light-theme .snap-option {
            background: rgba(229, 231, 235, 0.8);
            border-color: rgba(209, 213, 219, 1);
        }

        .light-theme .snap-option:hover {
            background-color: rgba(209, 213, 219, 1);
        }

        .light-theme .project-card .project-content {
            background: linear-gradient(to top, rgba(255, 255, 255, 0.95) 20%, transparent 100%);
        }

        .light-theme .project-card .project-title {
            color: var(--text-primary);
            text-shadow: none;
        }

        .light-theme .project-card .project-overlay {
            background: linear-gradient(to top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 70%, transparent 100%);
        }

        .light-theme .project-card .project-overlay p {
            color: var(--text-secondary);
        }

        .light-theme .blog-header::after {
            background: linear-gradient(to top, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.1) 100%);
        }

        .light-theme .blog-header-content h1,
        .light-theme .blog-header-content .blog-meta {
            color: var(--text-primary);
            text-shadow: none;
        }

        .light-theme #start-menu {
            background-color: rgba(255, 255, 255, 0.95);
            border-color: var(--border-color);
        }

        .light-theme #start-menu-search {
            background-color: rgba(255, 255, 255, 0.945);
            border-bottom-color: var(--border-color);
            color: var(--text-primary);
        }

        .light-theme .start-menu-item {
            color: var(--text-primary);
        }

        .light-theme .start-menu-item:hover {
            background-color: var(--accent-bg-subtle);
            color: var(--text-primary);
        }

        .light-theme .chat-message.bot {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .light-theme .chat-message.user {
            color: #fff;
            /* Keep user message text white on accent color bg */
        }

        .light-theme .text-secondary {
            color: var(--text-secondary);
        }

        .light-theme .accent-text {
            color: var(--accent-color);
        }

        .light-theme .text-purple-300 {
            color: #8b5cf6;
        }

        .light-theme .bg-purple-500\/20 {
            background-color: rgba(139, 92, 246, 0.1);
        }

        .light-theme .text-indigo-300 {
            color: #4f46e5;
        }

        .light-theme .bg-indigo-500\/20 {
            background-color: rgba(79, 70, 229, 0.1);
        }

        .light-theme .text-yellow-300 {
            color: #ca8a04;
        }

        .light-theme .bg-yellow-500\/20 {
            background-color: rgba(234, 179, 8, 0.1);
        }

        .light-theme .text-sky-300 {
            color: #0ea5e9;
        }

        .light-theme .bg-sky-500\/20 {
            background-color: rgba(14, 165, 233, 0.1);
        }

        .light-theme .text-pink-300 {
            color: #ec4899;
        }

        .light-theme .bg-pink-500\/20 {
            background-color: rgba(236, 72, 153, 0.1);
        }

        /* Terminal Exception for Light Mode */
        .light-theme #terminal-window {
            background-color: rgba(17, 24, 39, 0.8);
        }

        .light-theme #terminal-window .content {
            background-color: transparent;
        }

        .light-theme #terminal-window .title-bar {
            background-color: rgba(31, 41, 55, 0.9);
        }

        .light-theme #terminal-window .title-bar span {
            color: #d1d5db;
        }

        .light-theme #terminal-window .content {
            color: #4ade80;
            /* Green text */
        }

        .light-theme #terminal-window .terminal-prompt span {
            color: #60a5fa;
            /* Blue text */
        }

        /* Light Theme Fix for Contact App */
        .light-theme #contact-window .content {
            background-color: var(--bg-secondary);
        }

        .light-theme #contact-form input,
        .light-theme #contact-form textarea {
            background-color: var(--bg-tertiary);
            border-color: var(--border-color);
            color: var(--text-primary);
        }

        .light-theme #contact-form input:focus,
        .light-theme #contact-form textarea:focus {
            background-color: var(--bg-primary);
        }
        
        /* --- Special App Icon Style --- */
        .dock-item.special-app i {
            color: #f59e0b; /* Amber color */
            text-shadow: 0 0 8px rgba(245, 158, 11, 0.7);
        }

        .dock-item.special-app:hover {
            background-color: rgba(245, 158, 11, 0.2);
        }

        .light-theme .dock-item.special-app i {
            color: #d97706; /* Darker amber for light theme */
            text-shadow: none;
        }
        
        /* --- About This Portfolio App Specific Styles --- */
        #about-portfolio-window .content h3 {
            font-family: 'Space Mono', monospace;
            font-size: 1.125rem;
            color: var(--accent-color-text);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        #about-portfolio-window .tech-tag {
            display: inline-block;
            background-color: var(--accent-bg-subtle);
            color: var(--accent-color-text);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        #about-portfolio-window .tech-tag:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
    </style>
</head>

<body class="bg-gray-900 text-white">

    <!-- Login Screen -->
    <div id="login-screen">
        <div class="hello-container">
            <h1 id="hello-text">hello</h1>
        </div>
        <div class="progress-container"><br>
            <!-- MODIFICATION START: Added loading logo -->
            <img src="Gemini_Generated_Image_m2hjd5m2hjd5m2hj (1).png" alt="Portfolio OS Logo" class="loading-logo">
            <!-- MODIFICATION END -->
            <h1 class="progress-title">
                PORTFOLIO OS 
            </h1>
            <div class="progress-bar-outer">
                <div class="progress-bar-inner"></div>
            </div>
        </div>


    </div>

    <!-- BSOD Screen -->
    <div id="bsod-screen">
        <div id="bsod-emoticon">:(</div>
        <div id="bsod-text">
            <h1>Your Portfolio OS ran into a problem and needs to restart. We're just collecting some error info, and
                then we'll restart for you.</h1>
            <p>For more information about this issue and possible fixes, visit https://krish-sharma.dev/help</p>
            <p>If you call a support person, give them this info:<br>
                Stop Code: DEV_IS_PROBABLY_DEBUGGING</p>
        </div>
        <img id="bsod-qr" src="https://placehold.co/120x120/ffffff/000000?text=QR" alt="QR Code">
    </div>


    <!-- Desktop Environment -->
    <div id="desktop" class="desktop">
        <div id="desktop-clock-widget">
            <div id="desktop-time"></div>
            <div id="desktop-date"></div>
        </div>

        <!-- Top Bar -->
        <div class="top-bar h-12 flex items-center justify-between px-6 text-sm">
            <div class="flex items-center gap-4">
                <h1 class="font-bold text-lg">Krish's Portfolio</h1>
            </div>
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-4 text-gray-300 text-lg">
                    <i class="fas fa-chart-line cursor-pointer hover:text-white transition-colors" title="Task Manager"
                        onclick="openWindow('taskmanager')"></i>
                    <i class="fas fa-cog cursor-pointer hover:text-white transition-colors" title="Settings"
                        onclick="openWindow('settings')"></i>
                </div>
                <div id="clock" class="clock-font font-medium text-right text-cyan-300"></div>
            </div>
        </div>

        <!-- Start Menu -->
        <div id="start-menu">
            <input type="search" id="start-menu-search" placeholder="Search apps...">
            <div id="start-menu-apps">
                <a onclick="openWindow('projects'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-briefcase"></i> Projects</a>
                <a onclick="openWindow('achievements'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-trophy"></i> Achievements</a>
                <a onclick="openWindow('blog'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-feather-alt"></i> Blog</a>
                <a onclick="openWindow('contact'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-envelope"></i> Contact</a>
                <a onclick="openWindow('social'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-share-alt"></i> Socials</a>
                <hr class="border-gray-500/50 my-1">
                <a onclick="openWindow('game'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-gamepad"></i> Snake_Game</a>
                <a onclick="openWindow('chatbot'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-robot"></i> FAQ Bot</a>
                <a onclick="openWindow('newsletter'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-newspaper"></i> Newsletter</a>
                <a onclick="openWindow('terminal'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-terminal"></i> Terminal</a>
                <a onclick="openWindow('about-portfolio'); toggleStartMenu();" class="start-menu-item"><i
                        class="fas fa-info-circle"></i> About This Site</a>
            </div>
        </div>

        <!-- Window Templates -->
        <div id="about-window" class="window" style="top: 15%; left: 10%; width: 600px; height: 450px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('about')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('about')">
                        <div class="snap-layouts" id="snap-about"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('about')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-user-circle mr-2"></i>About Me</span>
                <div></div>
            </div>
            <div class="content content-grid-bg p-6">
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="flex-shrink-0 text-center md:sticky md:top-0 self-start">
                        <img src="https://placehold.co/256x256/111827/67e8f9?text=KS" alt="Krish Sharma"
                            class="rounded-full w-32 h-32 border-4 accent-border/50 mx-auto">
                        <h2 class="text-2xl font-bold accent-text mt-4">Krish Sharma</h2>
                        <p class="text-md text-secondary">BSc Computer Science Student</p>
                    </div>
                    <div class="flex-grow">
                        <h3 class="font-mono text-lg accent-text border-b-2 accent-border/30 pb-1 mb-3">
                            CREATOR_DETAIL.txt
                        </h3>
                        <p class="mb-6 leading-relaxed">
                            Hey there! I'm <strong class="accent-text">Krish Sharma</strong>, a second-year BSc Computer
                            Science student from India with a deep love for technology, design, and meaningful digital
                            experiences.
                            <br><br>
                            My journey started with a simple curiosity—how do the apps we use every day come to life?
                            Since then, I've been building intuitive and responsive web apps that don't just work—they
                            feel alive.
                            <br><br>
                            I'm currently diving deep into <span class="text-purple-300 font-semibold">Artificial
                                Intelligence</span> and exploring the mysterious but fascinating world of <span
                                class="text-indigo-300 font-semibold">Quantum Computing</span>. I enjoy turning ideas
                            into code, and problems into solutions.
                            <br><br>
                            Beyond the code, I'm passionate about crafting interfaces that speak to users, and I'm
                            always chasing the next big thing that stretches my creativity and technical skills.
                        </p>

                        <h3 class="font-mono text-lg accent-text border-b-2 accent-border/30 pb-1 mb-3">SKILLSET_MATRIX
                        </h3>
                        <div class="flex flex-wrap gap-2">
                            <span
                                class="accent-bg-subtle accent-text text-xs font-medium px-2.5 py-1 rounded-full">HTML</span>
                            <span
                                class="accent-bg-subtle accent-text text-xs font-medium px-2.5 py-1 rounded-full">CSS</span>
                            <span
                                class="accent-bg-subtle accent-text text-xs font-medium px-2.5 py-1 rounded-full">TailwindCSS</span>
                            <span
                                class="accent-bg-subtle accent-text text-xs font-medium px-2.5 py-1 rounded-full">JavaScript</span>
                            <span
                                class="accent-bg-subtle accent-text text-xs font-medium px-2.5 py-1 rounded-full">Python</span>
                            <span
                                class="bg-purple-500/20 text-purple-300 text-xs font-medium px-2.5 py-1 rounded-full">AI/ML</span>
                            <span
                                class="bg-indigo-500/20 text-indigo-300 text-xs font-medium px-2.5 py-1 rounded-full">Quantum
                                Computing</span>
                            <span
                                class="bg-yellow-500/20 text-yellow-300 text-xs font-medium px-2.5 py-1 rounded-full">Firebase</span>
                            <span class="bg-sky-500/20 text-sky-300 text-xs font-medium px-2.5 py-1 rounded-full">Git &
                                GitHub</span>
                            <span
                                class="bg-pink-500/20 text-pink-300 text-xs font-medium px-2.5 py-1 rounded-full">UI/UX</span>
                        </div>
                    </div>

                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <!-- About This Portfolio Window -->
        <div id="about-portfolio-window" class="window" style="top: 20%; left: 20%; width: 800px; height: 600px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('about-portfolio')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('about-portfolio')">
                        <div class="snap-layouts" id="snap-about-portfolio"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('about-portfolio')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-info-circle mr-2"></i>About This Portfolio</span>
                <div></div>
            </div>
            <div class="content p-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <h3>PROJECT_GENESIS.md</h3>
                        <p>
                            This portfolio was conceived by <strong>Krish Sharma</strong> not just as a gallery of projects, but as a project in itself. The goal was to break away from traditional, static portfolio websites and create an immersive, interactive experience that reflects a passion for user interface design and complex front-end development.
                        </p>
                        <p>
                            The core idea was to build a fully functional, web-based "Operating System" to showcase skills and projects in a memorable and engaging way. Development began in mid-2024, with a focus on creating a fluid, customizable, and feature-rich environment from the ground up.
                        </p>
                    </div>
                    <div class="bg-gray-900/50 p-4 rounded-lg border border-gray-700">
                         <h3>SYSTEM_SPECS.ini</h3>
                         <ul class="text-sm space-y-2 text-gray-400">
                            <li><strong>Creator:</strong> Krish Sharma</li>
                            <li><strong>Built:</strong> 2024</li>
                            <li><strong>Version:</strong> 1.05 (Portfolio OS)</li>
                            <li><strong>Base OS:</strong> Web Browser</li>
                            <li><strong>Core Language:</strong> JavaScript (ES6+)</li>
                         </ul>
                    </div>
                </div>
    
                <div class="mt-8">
                    <h3>CORE_TECHNOLOGIES.json</h3>
                    <p>This entire experience is built with standard web technologies, demonstrating what's possible with a creative approach. No heavy frameworks were used for the core OS functionality.</p>
                    <div class="flex flex-wrap gap-3 mt-4">
                        <span class="tech-tag">HTML5</span>
                        <span class="tech-tag">CSS3</span>
                        <span class="tech-tag">Tailwind CSS</span>
                        <span class="tech-tag">JavaScript</span>
                        <span class="tech-tag">Font Awesome</span>
                        <span class="tech-tag">Google Fonts</span>
                    </div>
                </div>
    
                <div class="mt-8">
                    <h3>KEY_FEATURES.log</h3>
                    <p>The portfolio is more than just a visual shell; it includes several functional components to create a realistic desktop experience:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Window Management:</strong> Draggable, resizable, and minimizable windows with a functioning z-index system.</li>
                        <li><strong>Interactive Dock & Start Menu:</strong> Familiar UI elements for launching applications within the portfolio.</li>
                        <li><strong>Customization Engine:</strong> A settings panel allowing users to change the theme (dark/light), accent colors, wallpaper, and even UI element properties like blur and opacity.</li>
                        <li><strong>Command-Line Terminal:</strong> A mock terminal that recognizes a variety of commands to navigate and interact with the portfolio, including an easter egg or two.</li>
                        <li><strong>Functional "Apps":</strong> Each section like "Projects", "Blog", and "Contact" is treated as a standalone application within the OS.</li>
                        <li><strong>Dynamic Content:</strong> The blog and other elements are rendered dynamically using JavaScript, showcasing data handling on the front-end.</li>
                    </ul>
                </div>
    
                <div class="mt-8">
                    <h3>USER_GUIDE.txt</h3>
                    <p>New to Portfolio OS? Here are some quick tips to get you started on your exploration:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Launch Apps:</strong> Click the <i class="fas fa-rocket mx-1"></i> icon on the bottom-left to open the Start Menu, or click any icon in the Dock at the bottom of the screen.</li>
                        <li><strong>Move Windows:</strong> Click and drag the top title bar of any window to move it around the desktop.</li>
                        <li><strong>Resize Windows:</strong> Hover over the bottom-right corner of any window until you see the resize cursor, then click and drag to change its size.</li>
                        <li><strong>Customize Your View:</strong> Open the "Settings" app (cog icon in the top-right bar) to change wallpapers, colors, and themes to your liking.</li>
                        <li><strong>Talk to the Bot:</strong> The FAQ Bot (robot icon in the dock) can answer common questions about Krish and his work.</li>
                    </ul>
                </div>
                
                <div class="mt-8">
                    <h3>DESIGN_PHILOSOPHY.txt</h3>
                    <p>
                        The design is heavily inspired by modern operating systems, blending elements from macOS, Windows, and Linux environments to create a unique aesthetic. The primary philosophy was <strong>"show, don't just tell."</strong> Instead of listing "JavaScript" as a skill, the portfolio demonstrates it through its very existence and functionality. The aim is to provide a fun, exploratory journey for visitors, leaving a lasting impression of creativity and technical capability.
                    </p>
                </div>
    
                <div class="mt-8">
                    <h3>CHALLENGES_AND_LEARNINGS.log</h3>
                    <p>Building this portfolio was a fun puzzle! It was a great way to dive deep into vanilla JavaScript and see how far I could push it. Here are a few interesting hurdles:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Juggling the Moving Parts:</strong> Without a framework, keeping track of which window was open, what theme was active, and where everything was positioned was a great exercise in managing state manually. It really forced me to think about how all the pieces talk to each other.</li>
                        <li><strong>The Stacking Game:</strong> Making sure the window you click on always comes to the front seems simple, but getting that z-index stacking to work perfectly for multiple windows was a fun challenge. It's all about tracking the 'active' element.</li>
                        <li><strong>Keeping it Snappy:</strong> Animations and effects like background blur can slow things down. A big part of the process was learning to write efficient code to keep the 'OS' feeling smooth and responsive.</li>
                    </ul>
                </div>
    
                <div class="mt-8">
                    <h3>A_NOTE_ON_ACCESSIBILITY.txt</h3>
                    <p>I believe the web should be for everyone. While this portfolio is a highly visual project, I'm always learning and thinking about how to make it more accessible.</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li>I'm working on improving keyboard navigation to make it easier to use without a mouse.</li>
                        <li>Adding the right ARIA labels so screen readers can better understand the custom interface is another key goal.</li>
                        <li>I'm also focused on ensuring all text is easy to read against its background in both themes.</li>
                    </ul>
                </div>
                
                <div class="mt-8">
                    <h3>RESOURCES_AND_TOOLS.log</h3>
                    <p>A project like this is made possible by a variety of excellent tools and services. Here’s a look at the development environment and creative toolkit:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Code Editor:</strong> Visual Studio Code</li>
                        <li><strong>AI & Brainstorming:</strong> Google Gemini & Perplexity AI</li>
                        <li><strong>Design & Graphics:</strong> Figma & Canva</li>
                        <li><strong>Code Quality:</strong> Prettier & ESLint</li>
                        <li><strong>Browser Tools:</strong> Chrome DevTools for debugging and performance tuning.</li>
                        <li><strong>Version Control:</strong> Git & GitHub</li>
                        <li><strong>Hosting:</strong> Netlify</li>
                    </ul>
                </div>
    
                <div class="mt-8">
                    <h3>PROJECT_TRIVIA.log</h3>
                    <p>A few fun facts from behind the scenes of building Portfolio OS:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Framework Free:</strong> The entire OS simulation, including all window management and interactivity, is built with pure, vanilla JavaScript to showcase core programming skills.</li>
                        <li><strong>The Login Screen:</strong> The "hello" boot-up sequence was one of the last features added, inspired by the welcome screens of classic operating systems to create a more immersive first impression.</li>
                        <li><strong>Most Complex App:</strong> The "Settings" app was surprisingly the most complex to build, as it needed to control and update CSS variables across the entire project in real-time.</li>
                        <li><strong>Dock Evolution:</strong> The bottom dock originally used simple icons, but text labels were added later to improve usability and give it a more distinct look.</li>
                    </ul>
                </div>
    
                <div class="mt-8">
                    <h3>EASTER_EGGS.log</h3>
                    <p>What's an OS without a few secrets? This portfolio has some hidden features for curious explorers. Here are a few hints:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li>Sometimes, a system crash can be... intentional. Try finding the right command in the terminal.</li>
                        <li>The terminal has more to it than just launching apps. Try asking it `whoami` or using `neofetch`.</li>
                        <li>Hovering over the minimize button might reveal more layout options than you'd expect.</li>
                        <li>There might be other hidden commands and interactions to discover!</li>
                    </ul>
                </div>
    
                <div class="mt-8">
                    <h3>CREDITS.md</h3>
                    <p>No project is built in a vacuum. This portfolio stands on the shoulders of giants and was inspired by many great tools and ideas:</p>
                    <ul class="list-disc list-inside space-y-2 text-secondary pl-2">
                        <li><strong>Inspiration:</strong> The user interfaces of macOS, Windows 11, and various Linux desktop environments.</li>
                        <li><strong>Core Tools:</strong> <a href="https://tailwindcss.com/" target="_blank" class="accent-text hover:underline">Tailwind CSS</a> for styling, <a href="https://fontawesome.com/" target="_blank" class="accent-text hover:underline">Font Awesome</a> for icons, and <a href="https://fonts.google.com/" target="_blank" class="accent-text hover:underline">Google Fonts</a> for typography.</li>
                        <li><strong>Images:</strong> Wallpapers and placeholders are from <a href="https://unsplash.com/" target="_blank" class="accent-text hover:underline">Unsplash</a> and <a href="https://placehold.co/" target="_blank" class="accent-text hover:underline">placehold.co</a>.</li>
                        <li><strong>Community:</strong> A huge thank you to the open-source community and countless developers who share their knowledge online.</li>
                    </ul>
                </div>
    
                <div class="mt-8 pt-6 border-t border-gray-700/50">
                    <h3>NOTE_FROM_THE_ASSISTANT.txt</h3>
                    <p class="text-sm italic text-gray-400">
                        <i class="fas fa-robot mr-2 accent-text"></i>This summary and application were generated by an AI assistant based on the portfolio's source code. The goal was to capture the essence of the project's creation and features, just as the portfolio itself captures the creator's skills.
                    </p>
                </div>
    
            </div>
            <div class="resizer"></div>
        </div>

        <div id="projects-window" class="window" style="top: 25%; left: 25%; width: 850px; height: 550px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('projects')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('projects')">
                        <div class="snap-layouts" id="snap-projects"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('projects')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-briefcase mr-2"></i>My Projects</span>
                <div></div>
            </div>
            <div class="content content-grid-bg p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project Card 1 -->
                    <div class="project-card">
                        <div class="project-image-container h-48">
                            <img src="https://placehold.co/400x300/111827/67e8f9?text=Project+Alpha"
                                class="project-image w-full h-full object-cover" alt="EcoScore">
                            <div class="project-content">
                                <h3 class="project-title accent-text">EcoScore</h3>
                            </div>
                        </div>
                        <div class="project-overlay">
                            <p class="text-sm text-center text-secondary mb-4">A web-based visualization tool to calculate
                                your daily carbon footprints.</p>
                            <div class="project-links flex space-x-4 text-xl">
                                <a href="https://ecoscoreworld.netlify.app/" target="_blank" title="Live Demo"><i
                                        class="fas fa-globe"></i></a>
                                <a href="#" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
                            </div>
                        </div>
                    </div>
                    <!-- Project Card 2 -->
                    <div class="project-card">
                        <div class="project-image-container h-48">
                            <img src="https://placehold.co/400x300/111827/a78bfa?text=Project+Beta"
                                class="project-image w-full h-full object-cover" alt="TrendX">
                            <div class="project-content">
                                <h3 class="project-title" style="color: #c4b5fd;">TrendX</h3>
                            </div>
                        </div>
                        <div class="project-overlay">
                            <p class="text-sm text-center text-secondary mb-4">A website to check the all the lastest trends
                                among all social media apps.</p>
                            <div class="project-links flex space-x-4 text-xl">
                                <a href="https://trendxverse.netlify.app/" target="_blank" title="Live Demo"
                                    style="color: #a78bfa;"><i class="fas fa-globe"></i></a>
                                <a href="https://github.com/imkrish0011/trendX" target="_blank" title="GitHub"
                                    style="color: #a78bfa;"><i class="fab fa-github"></i></a>
                            </div>
                        </div>
                    </div>
                    <!-- Project Card 3 -->
                    <div class="project-card">
                        <div class="project-image-container h-48">
                            <img src="https://placehold.co/400x300/111827/f472b6?text=PortfolioOS"
                                class="project-image w-full h-full object-cover" alt="PortfolioOS">
                            <div class="project-content">
                                <h3 class="project-title" style="color: #f9a8d4;">PortfolioOS</h3>
                            </div>
                        </div>
                        <div class="project-overlay">
                            <p class="text-sm text-center text-secondary mb-4">This very portfolio, built with a unique
                                desktop interface to showcase my skills.</p>
                            <div class="project-links flex space-x-4 text-xl">
                                <a href="#" title="Live Demo" style="color: #f472b6;"><i class="fas fa-globe"></i></a>
                                <a href="#" title="GitHub" style="color: #f472b6;"><i class="fab fa-github"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="contact-window" class="window" style="top: 40%; left: 15%; width: 500px">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('contact')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('contact')">
                        <div class="snap-layouts" id="snap-contact"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('contact')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-envelope mr-2"></i>Get In Touch</span>
                <div></div>
            </div>
            <div class="content p-6">
                <p class="text-lg mb-6 text-center">Have a question or want to work together? Send me a message!</p>
                <form id="contact-form" action="https://formspree.io/f/xgvzkarq" method="POST" class="space-y-4">
                    <input type="text" name="name" placeholder="Your Name" required
                        class="w-full rounded-md focus:outline-none">
                    <input type="email" name="email" placeholder="Your Email" required
                        class="w-full rounded-md focus:outline-none">
                    <textarea name="message" placeholder="Your Message" rows="5" required
                        class="w-full rounded-md focus:outline-none"></textarea>
                    <button type="submit" class="w-full p-3 rounded-md font-bold text-gray-900">Send Message</button>
                </form>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="settings-window" class="window" style="top: 15%; left: 50%; width: 500px; height: 600px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('settings')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('settings')">
                        <div class="snap-layouts" id="snap-settings"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('settings')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-cog mr-2"></i>Settings</span>
                <div></div>
            </div>
            <div class="content content-grid-bg p-6 space-y-4">
                <div class="settings-section">
                    <h3 class="accent-text">Appearance</h3>
                    <div class="space-y-4">
                        <div class="slider-control">
                            <label for="blur-slider">Blur</label>
                            <input type="range" id="blur-slider" min="0" max="40" value="20">
                        </div>
                        <div class="slider-control">
                            <label for="opacity-slider">Opacity</label>
                            <input type="range" id="opacity-slider" min="0.1" max="1" step="0.05" value="0.6">
                        </div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="accent-text">Theme</h3>
                    <div id="theme-options" class="segmented-control">
                        <button data-theme="dark">Dark</button>
                        <button data-theme="light">Light</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="accent-text">Accent Color</h3>
                    <div id="accent-color-options" class="flex items-center space-x-4">
                        <button data-color="cyan"
                            class="w-8 h-8 rounded-full bg-cyan-400 border-2 border-transparent"></button>
                        <button data-color="violet"
                            class="w-8 h-8 rounded-full bg-violet-400 border-2 border-transparent"></button>
                        <button data-color="pink"
                            class="w-8 h-8 rounded-full bg-pink-400 border-2 border-transparent"></button>
                        <button data-color="green"
                            class="w-8 h-8 rounded-full bg-green-400 border-2 border-transparent"></button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="accent-text">Typography</h3>
                    <div id="font-options" class="segmented-control">
                        <button data-font="'Inter', sans-serif" style="font-family: 'Inter', sans-serif;">Inter</button>
                        <button data-font="'Lora', serif" style="font-family: 'Lora', serif;">Lora</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="accent-text">System</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block mb-2 text-sm font-medium text-secondary">Time Format</label>
                            <div id="time-format-options" class="segmented-control">
                                <button data-format="12">12-Hour</button>
                                <button data-format="24">24-Hour</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3 class="accent-text">Wallpaper</h3>
                    <div id="wallpaper-options" class="grid grid-cols-3 gap-4"></div>
                </div>
                <div>
                    <button id="reset-ui" class="w-full px-4 py-2 rounded-md font-bold text-white">Reset UI</button>
                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="terminal-window" class="window" style="top: 30%; left: 40%; width: 600px; height: 350px;" tabindex="0">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('terminal')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('terminal')">
                        <div class="snap-layouts" id="snap-terminal"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('terminal')"></button>
                </div>
                <span class="font-semibold text-sm font-mono"><i class="fas fa-terminal mr-2"></i>/bin/portfolio_bash</span>
                <div></div>
            </div>
            <div class="content p-2 font-mono text-sm">
                <div id="terminal-output"></div>
                <div class="terminal-prompt">
                    <span>guest@PortfolioOS/CommandLine:~$</span>
                    <span id="terminal-input" class="flex-1 ml-2"></span>
                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="social-window" class="window" style="top: 35%; left: 35%; width: 400px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('social')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('social')">
                        <div class="snap-layouts" id="snap-social"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('social')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-share-alt mr-2"></i>Social Hub</span>
                <div></div>
            </div>
            <div class="content p-4 space-y-3">
                <a href="https://github.com/imkrish0011" target="_blank" class="social-link">
                    <i class="fab fa-github"></i>
                    <span>GitHub</span>
                    <i class="fas fa-arrow-up-right-from-square external-icon"></i>
                </a>
                <a href="https://www.linkedin.com/in/krish-sharma-a78a99226/" target="_blank" class="social-link">
                    <i class="fab fa-linkedin"></i>
                    <span>LinkedIn</span>
                    <i class="fas fa-arrow-up-right-from-square external-icon"></i>
                </a>
                <a href="https://x.com/signin_as_krish" target="_blank" class="social-link">
                    <i class="fab fa-twitter"></i>
                    <span>X (Twitter)</span>
                    <i class="fas fa-arrow-up-right-from-square external-icon"></i>
                </a>
                <a href="https://medium.com/@krish.qcai" target="_blank" class="social-link">
                    <i class="fab fa-medium"></i>
                    <span>Medium</span>
                    <i class="fas fa-arrow-up-right-from-square external-icon"></i>
                </a>
                <a href="https://www.instagram.com/signin_as_krish/" target="_blank" class="social-link">
                    <i class="fab fa-instagram"></i>
                    <span>Instagram</span>
                    <i class="fas fa-arrow-up-right-from-square external-icon"></i>
                </a>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="blog-window" class="window" style="top: 15%; left: 15%; width: 800px; height: 600px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('blog')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('blog')">
                        <div class="snap-layouts" id="snap-blog"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('blog')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-feather-alt mr-2"></i>My Blog</span>
                <div></div>
            </div>
            <div class="content flex">
                <div class="w-1/3 border-r border-border-color blog-post-list overflow-y-auto">
                    <!-- Blog post links will be injected here -->
                </div>
                <div class="w-2/3 blog-content-area overflow-y-auto">
                    <!-- Blog post content will be injected here -->
                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="taskmanager-window" class="window" style="top: 20%; left: 30%; width: 600px; height: 400px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('taskmanager')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('taskmanager')">
                        <div class="snap-layouts" id="snap-taskmanager"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('taskmanager')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-chart-line mr-2"></i>Task Manager</span>
                <div></div>
            </div>
            <div class="content">
                <table id="taskmanager-table">
                    <thead>
                        <tr>
                            <th>Process Name</th>
                            <th>Status</th>
                            <th>CPU</th>
                            <th>Memory</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="taskmanager-list">
                        <!-- Processes will be injected here by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="chatbot-window" class="window" style="top: 30%; left: 50%; width: 400px; height: 500px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('chatbot')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('chatbot')">
                        <div class="snap-layouts" id="snap-chatbot"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('chatbot')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-robot mr-2"></i>FAQ Bot</span>
                <div></div>
            </div>
            <div class="content flex flex-col">
                <div id="chatbot-messages" class="flex-grow overflow-y-auto"></div>
                <form id="chatbot-input-form">
                    <input type="text" id="chatbot-input" placeholder="Ask me a question..." autocomplete="off">
                    <button type="submit" class="px-4 py-2"
                        style="background-color: var(--accent-color); color: #111827;"><i
                            class="fas fa-paper-plane"></i></button>
                </form>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="achievements-window" class="window" style="top: 20%; left: 20%; width: 550px; height: 500px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('achievements')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('achievements')">
                        <div class="snap-layouts" id="snap-achievements"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('achievements')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-trophy mr-2"></i>Achievements</span>
                <div></div>
            </div>
            <div class="content p-6">
                <div class="space-y-4">
                    <div class="achievement-item">
                        <div class="achievement-icon"><i class="fas fa-brain"></i></div>
                        <div class="flex-grow achievement-details">
                            <h3>Survived Algorithms Without Losing My Mind</h3>
                            <p>Solved 100+ problems. Got stuck. Googled. Raged. Solved anyway.</p>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar"></div>
                            </div>
                        </div>
                    </div>

                    <div class="achievement-item">
                        <div class="achievement-icon"><i class="fas fa-fire"></i></div>
                        <div class="flex-grow achievement-details">
                            <h3>Built It. Broke It. Fixed It.</h3>
                            <p>Learned more from debugging one bug than an entire course. Still shipped the project.</p>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar"></div>
                            </div>
                        </div>
                    </div>

                    <div class="achievement-item">
                        <div class="achievement-icon"><i class="fas fa-laptop-code"></i></div>
                        <div class="flex-grow achievement-details">
                            <h3>Solo Project, No Sleep</h3>
                            <p>Built a full-stack website from scratch. 3 AM commits. Coffee was the co-pilot.</p>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar"></div>
                            </div>
                        </div>
                    </div>

                    <div class="achievement-item">
                        <div class="achievement-icon"><i class="fas fa-users"></i></div>
                        <div class="flex-grow achievement-details">
                            <h3>Taught What I Knew</h3>
                            <p>Helped friends debug, mentored peers, and made tech feel less scary for others.</p>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar"></div>
                            </div>
                        </div>
                    </div>

                    <div class="achievement-item">
                        <div class="achievement-icon"><i class="fas fa-heart"></i></div>
                        <div class="flex-grow achievement-details">
                            <h3>Still Love Code After All This</h3>
                            <p>Despite the bugs, late nights, and chaos—I’m still here. Still building.</p>
                            <div class="achievement-progress">
                                <div class="achievement-progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="newsletter-window" class="window" style="top: 45%; left: 40%; width: 400px; height: 300px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('newsletter')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('newsletter')">
                        <div class="snap-layouts" id="snap-newsletter"></div>
                    </div>
                    <button class="window-control maximize" onclick="maximizeWindow('newsletter')"></button>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-newspaper mr-2"></i>Subscribe</span>
                <div></div>
            </div>
            <div class="content content-grid-bg p-6 flex flex-col justify-center items-center text-center">
                <h3 class="text-xl font-bold mb-2">Stay Updated!</h3>
                <p class="text-secondary mb-6">Subscribe to my newsletter for the latest on projects, articles, and tech
                    discoveries.</p>
                <form id="newsletter-form" action="https://formspree.io/f/xgvzkarq" method="POST"
                    class="w-full flex flex-col gap-4">
                    <input type="email" name="email" placeholder="your.email@example.com" required
                        class="w-full p-3 rounded bg-tertiary border border-border-color focus:outline-none focus:border-accent-color text-center">
                    <button type="submit" class="w-full p-3 rounded font-bold text-white"
                        style="background-color: var(--accent-color);">Subscribe</button>
                </form>
            </div>
            <div class="resizer"></div>
        </div>

        <div id="game-window" class="window" style="top: 15%; left: 20%; width: 440px; height: 520px;">
            <div class="title-bar rounded-t-lg">
                <div class="window-controls">
                    <button class="window-control close" onclick="closeWindow('game')"></button>
                    <div class="window-control minimize" onclick="minimizeWindow('game')"></div>
                    <div class="window-control maximize"></div>
                </div>
                <span class="font-semibold text-sm"><i class="fas fa-gamepad mr-2"></i>Snake Game</span>
                <div></div>
            </div>
            <div id="game-content" class="content">
                <div id="game-info">
                    <div id="score">Score: 0</div>
                    <div id="high-score">High Score: 0</div>
                </div>
                <canvas id="snake-canvas" width="400" height="400"></canvas>
                <div id="game-over-text">GAME OVER<span>Press Enter to Restart</span></div>
            </div>
            <div class="resizer"></div>
        </div>

        <!-- Bottom Left Controls -->
        <div id="bottom-left-controls">
            <button id="start-button" class="control-button" title="Start Menu">
                <i class="fas fa-rocket"></i>
            </button>
            <button id="theme-toggle" class="control-button" title="Toggle Theme">
                <i class="fas fa-moon"></i>
            </button>
        </div>

        <!-- Bottom Dock -->
        <div id="bottom-dock" class="bottom-dock">
            <div id="dock-about" class="dock-item" onclick="handleDockClick('about')" title="About Me">
                <i class="fas fa-user-astronaut"></i><span class="dock-item-label">About Me</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-projects" class="dock-item" onclick="handleDockClick('projects')" title="Projects">
                <i class="fas fa-layer-group"></i><span class="dock-item-label">Projects</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-achievements" class="dock-item" onclick="handleDockClick('achievements')" title="Achievements">
                <i class="fas fa-trophy"></i><span class="dock-item-label">Achievements</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-blog" class="dock-item" onclick="handleDockClick('blog')" title="Blog">
                <i class="fas fa-feather-alt"></i><span class="dock-item-label">Blog</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-game" class="dock-item" onclick="handleDockClick('game')" title="Snake Game">
                <i class="fas fa-gamepad"></i><span class="dock-item-label">Game</span>
                <div class="active-dot"></div>
            </div>
            <!-- New App Icon -->
            <div id="dock-about-portfolio" class="dock-item special-app" onclick="handleDockClick('about-portfolio')" title="About This Site">
                <i class="fas fa-info-circle"></i>
                <span class="dock-item-label">About Site</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-contact" class="dock-item" onclick="handleDockClick('contact')" title="Contact">
                <i class="fas fa-envelope"></i><span class="dock-item-label">Contact</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-social" class="dock-item" onclick="handleDockClick('social')" title="Socials">
                <i class="fas fa-share-alt"></i><span class="dock-item-label">Socials</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-chatbot" class="dock-item" onclick="handleDockClick('chatbot')" title="FAQ Bot">
                <i class="fas fa-robot"></i><span class="dock-item-label">FAQ Bot</span>
                <div class="active-dot"></div>
            </div>
            <div id="dock-terminal" class="dock-item" onclick="handleDockClick('terminal')" title="Terminal">
                <i class="fas fa-terminal"></i><span class="dock-item-label">Terminal</span>
                <div class="active-dot"></div>
            </div>
            <div class="dock-item" onclick="window.open('cv.pdf', '_blank')" title="CV">
                <i class="fas fa-file-pdf"></i><span class="dock-item-label">CV</span>
            </div>
        </div>
    </div>

    <script>
        // --- Clock Functionality ---
        const clockElement = document.getElementById('clock');
        const desktopTimeElement = document.getElementById('desktop-time');
        const desktopDateElement = document.getElementById('desktop-date');
        let is24HourFormat = false;

        function updateClock() {
            const now = new Date();
            const timeOpts = { hour: '2-digit', minute: '2-digit', hour12: !is24HourFormat };
            const dateOpts = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };

            // Top bar clock
            const time = now.toLocaleTimeString([], { ...timeOpts, second: '2-digit' });
            const date = now.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' });
            clockElement.innerHTML = `<span>${date}</span><span class="mx-2">|</span><span>${time}</span>`;

            // Desktop widget clock
            desktopTimeElement.textContent = now.toLocaleTimeString([], timeOpts).replace(' ', '');
            desktopDateElement.textContent = now.toLocaleDateString([], dateOpts);
        }

        // --- Settings & UI Customization ---
        const desktop = document.getElementById('desktop');
        const wallpaperOptionsContainer = document.getElementById('wallpaper-options');
        const themeOptionsContainer = document.getElementById('theme-options');
        const accentColorOptionsContainer = document.getElementById('accent-color-options');
        const fontOptionsContainer = document.getElementById('font-options');
        const timeFormatOptionsContainer = document.getElementById('time-format-options');
        const blurSlider = document.getElementById('blur-slider');
        const opacitySlider = document.getElementById('opacity-slider');
        const bottomDock = document.getElementById('bottom-dock');
        const bottomLeftControls = document.getElementById('bottom-left-controls');
        const resetButton = document.getElementById('reset-ui');
        const root = document.documentElement;

        const wallpapers = [
            { id: 'wit', url: 'img/bg4.jpg', thumb: 'img/bg4.jpg' },
            { id: 'earth', url: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop', thumb: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=200&auto=format&fit=crop' },
            { id: 'macos', url: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=2070&auto=format&fit=crop', thumb: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=200&auto=format&fit=crop' },
            { id: 'kali', url: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=2070&auto=format&fit=crop', thumb: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=200&auto=format&fit=crop' },
            { id: 'linux', url: 'img/bg1.jpg', thumb: 'img/bg1.jpg' },
            { id: 'dist', url: 'img/bg2.png', thumb: 'img/bg2.png' },
            { id: 'extro', url: 'img/bg3.jpeg', thumb: 'img/bg3.jpeg' },
            { id: 'port', url: 'img/bg5.jpg', thumb: 'img/bg5.jpg' },
            { id: 'maxi', url: 'img/bg6.jpg', thumb: 'img/bg6.jpg' },
        ];
        const accentColors = {
            cyan: { main: '#22d3ee', text: '#67e8f9', bg: 'rgba(34, 211, 238, 0.2)' },
            violet: { main: '#a78bfa', text: '#c4b5fd', bg: 'rgba(167, 139, 250, 0.2)' },
            pink: { main: '#f472b6', text: '#f9a8d4', bg: 'rgba(244, 114, 182, 0.2)' },
            green: { main: '#4ade80', text: '#86efac', bg: 'rgba(74, 222, 128, 0.2)' },
        };
        const fonts = {
            "'Inter', sans-serif": "Inter",
            "'Space Mono', monospace": "Space Mono",
            "'Lora', serif": "Lora"
        };

        let currentSettings = {};

        function applySettings(settings) {
            applyTheme(settings.theme);
            applyAccentColor(settings.accent);
            applyWallpaper(settings.wallpaper);
            applyBlur(settings.blur);
            applyOpacity(settings.opacity);
            applyFont(settings.font);
            applyTimeFormat(settings.timeFormat);
            updateSettingsUI();
        }

        function saveSettings() {
            localStorage.setItem('portfolioOSSettings', JSON.stringify(currentSettings));
        }

        function loadSettings() {
            const saved = localStorage.getItem('portfolioOSSettings');
            const defaults = {
                theme: 'dark',
                accent: 'cyan',
                wallpaper: 'wit',
                blur: 20,
                opacity: 0.6,
                font: "'Inter', sans-serif",
                timeFormat: '12'
            };
            currentSettings = saved ? JSON.parse(saved) : defaults;
            applySettings(currentSettings);
        }

        function applyTheme(theme) {
            const themeIcon = document.querySelector('#theme-toggle i');
            document.body.classList.toggle('light-theme', theme === 'light');
            themeIcon.className = theme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
            currentSettings.theme = theme;
        }

        function applyAccentColor(color) {
            const { main, text, bg } = accentColors[color];
            root.style.setProperty('--accent-color', main);
            root.style.setProperty('--accent-color-text', text);
            root.style.setProperty('--accent-bg-subtle', bg);
            currentSettings.accent = color;
        }

        function applyWallpaper(id) {
            const selectedWp = wallpapers.find(wp => wp.id === id);
            if (selectedWp) {
                desktop.style.backgroundImage = `url('${selectedWp.url}')`;
                currentSettings.wallpaper = id;
            }
        }

        function applyBlur(value) {
            root.style.setProperty('--window-blur', `${value}px`);
            currentSettings.blur = value;
        }

        function applyOpacity(value) {
            root.style.setProperty('--window-bg-opacity', value);
            currentSettings.opacity = value;
        }

        function applyFont(font) {
            root.style.setProperty('--font-primary', font);
            currentSettings.font = font;
        }

        function applyTimeFormat(format) {
            is24HourFormat = format === '24';
            currentSettings.timeFormat = format;
            updateClock();
        }

        function updateSettingsUI() {
            // Update controls to reflect current settings
            themeOptionsContainer.querySelectorAll('button').forEach(btn => btn.classList.toggle('active', btn.dataset.theme === currentSettings.theme));
            accentColorOptionsContainer.querySelectorAll('button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.color === currentSettings.accent);
                btn.classList.toggle('border-white', btn.dataset.color === currentSettings.accent);
            });
            wallpaperOptionsContainer.querySelectorAll('img').forEach(img => img.classList.toggle('active', img.alt === currentSettings.wallpaper));
            fontOptionsContainer.querySelectorAll('button').forEach(btn => btn.classList.toggle('active', btn.dataset.font === currentSettings.font));
            timeFormatOptionsContainer.querySelectorAll('button').forEach(btn => btn.classList.toggle('active', btn.dataset.format === currentSettings.timeFormat));

            blurSlider.value = currentSettings.blur;
            opacitySlider.value = currentSettings.opacity;
        }

        function resetUI() {
            const defaults = {
                theme: 'dark', accent: 'cyan', wallpaper: 'wit', blur: 20, opacity: 0.6, font: "'Inter', sans-serif", timeFormat: '12'
            };
            currentSettings = defaults;
            applySettings(currentSettings);
            saveSettings();
        }

        // --- Terminal Functionality ---
        const terminalWindow = document.getElementById('terminal-window');
        const terminalOutput = document.getElementById('terminal-output');
        const terminalInput = document.getElementById('terminal-input');
        let currentCommand = '';

        function resetTerminal() {
            terminalOutput.innerHTML = '';
            appendToTerminal("<p>PortfolioOS [Version 1.05]</p><p>(c) Krish Sharma. All rights reserved.</p><p>Welcome, guest. Type 'help' for a list of commands.</p>");
        }

        function appendToTerminal(html) {
            const outputEl = document.getElementById('terminal-output');
            outputEl.insertAdjacentHTML('beforeend', html);
            terminalWindow.querySelector('.content').scrollTop = terminalWindow.querySelector('.content').scrollHeight;
        }

        const commands = {
            'help': {
                description: 'Shows a list of available commands.',
                action: () => {
                    let helpText = '<p class="command-output">Available Commands:</p><ul class="list-inside list-disc pl-4">';
                    for (const cmd in commands) {
                        helpText += `<li><span class="text-cyan-400">${cmd}</span>: ${commands[cmd].description}</li>`;
                    }
                    helpText += '</ul>';
                    appendToTerminal(helpText);
                }
            },
            'run': {
                description: 'Executes an application. Usage: run [app_name]',
                action: (args) => {
                    const appName = args[0]?.replace('.exe', '');
                    if (document.getElementById(`${appName}-window`)) {
                        openWindow(appName);
                        appendToTerminal(`<p class="command-output">Opening ${appName}...</p>`);
                    } else {
                        appendToTerminal(`<p class="text-red-400">Application not found: ${appName}</p>`);
                    }
                }
            },
            'ls': {
                description: 'Lists projects. Usage: ls --projects',
                action: (args) => {
                    if (args[0] === '--projects') {
                        openWindow('projects');
                        appendToTerminal('<p class="command-output">Showing projects...</p>');
                    } else {
                        appendToTerminal('<p class="text-red-400">Invalid flag. Did you mean "ls --projects"?</p>');
                    }
                }
            },
            'send-message': { description: 'Opens the contact form.', action: () => { openWindow('contact'); appendToTerminal('<p class="command-output">Opening contact form...</p>'); } },
            'cat': {
                description: 'Displays file contents. Usage: cat CV.pdf',
                action: (args) => {
                    if (args[0] === 'CV.pdf') {
                        window.open('https://placehold.co/800x1100.pdf', '_blank');
                        appendToTerminal('<p class="command-output">Opening CV in new tab...</p>');
                    } else {
                        appendToTerminal(`<p class="text-red-400">File not found: ${args[0]}</p>`);
                    }
                }
            },
            'config': {
                description: 'Opens system settings. Usage: config --system',
                action: (args) => {
                    if (args[0] === '--system') {
                        openWindow('settings');
                        appendToTerminal('<p class="command-output">Opening settings...</p>');
                    } else {
                        appendToTerminal('<p class="text-red-400">Invalid flag. Did you mean "config --system"?</p>');
                    }
                }
            },
            'taskmgr': { description: 'Opens the Task Manager.', action: () => { openWindow('taskmanager'); appendToTerminal('<p class="command-output">Opening Task Manager...</p>'); } },
            'neofetch': {
                description: 'Displays system information.',
                action: () => {
                    const art = `<pre class="accent-text">
      ....         
   ,odxkkkxdo,      guest@PortfolioOS
 ,dkkx'  'okkxk,    -----------------
.kko'      'okkx.   OS: PortfolioOS v3.14
;xxc        oxx;    Host: GHOST
.lxl........lxl.    Uptime: ${Math.floor(performance.now() / 60000)} minutes
  'lxxo;;oxxl'      Shell: portfolio_bash
    'coo}{ooc'      Resolution: ${window.innerWidth}x${window.innerHeight}
      'lxxl'        Terminal: /bin/portfolio_bash
        ''          CPU: Imagination
                    Creator & Designer: Krish Sharma
</pre>`;
                    appendToTerminal(art);
                }
            },
            'clear': { description: 'Clears the terminal screen.', action: () => { terminalOutput.innerHTML = ''; } },
            'date': {
                description: 'Displays the current date and time.',
                action: () => appendToTerminal(`<p>${new Date().toString()}</p>`)
            },
            'echo': {
                description: 'Prints a message. Usage: echo [message]',
                action: (args) => appendToTerminal(`<p>${args.join(' ')}</p>`)
            },
            'whoami': {
                description: 'Displays user information.',
                action: () => appendToTerminal('<p>guest - A curious visitor exploring the digital realm of Krish Sharma.</p>')
            },
            'theme': {
                description: 'Changes the UI theme. Usage: theme [dark|light]',
                action: (args) => {
                    const theme = args[0];
                    if (theme === 'dark' || theme === 'light') {
                        applyTheme(theme);
                        updateSettingsUI();
                        saveSettings();
                        appendToTerminal(`<p>Theme changed to ${theme}.</p>`);
                    } else {
                        appendToTerminal('<p class="text-red-400">Invalid theme. Use "dark" or "light".</p>');
                    }
                }
            },
            'accent': {
                description: `Changes UI accent color. Usage: accent [${Object.keys(accentColors).join('|')}]`,
                action: (args) => {
                    const color = args[0];
                    if (accentColors[color]) {
                        applyAccentColor(color);
                        updateSettingsUI();
                        saveSettings();
                        appendToTerminal(`<p>Accent color changed to ${color}.</p>`);
                    } else {
                        appendToTerminal(`<p class="text-red-400">Invalid color. Available: ${Object.keys(accentColors).join(', ')}</p>`);
                    }
                }
            },
            'wallpaper': {
                description: 'Changes the desktop wallpaper. Usage: wallpaper [id] or wallpaper --list',
                action: (args) => {
                    if (args[0] === '--list') {
                        const wallList = wallpapers.map(w => w.id).join(', ');
                        appendToTerminal(`<p>Available wallpapers: ${wallList}</p>`);
                        return;
                    }
                    const id = args[0];
                    if (wallpapers.some(w => w.id === id)) {
                        applyWallpaper(id);
                        updateSettingsUI();
                        saveSettings();
                        appendToTerminal(`<p>Wallpaper changed to ${id}.</p>`);
                    } else {
                        appendToTerminal(`<p class="text-red-400">Invalid wallpaper ID. Use "wallpaper --list" to see options.</p>`);
                    }
                }
            },
            'bsod': {
                description: 'Uh oh. Try at your own risk.',
                action: () => triggerBSOD()
            },
            'exit': {
                description: 'Closes the terminal window.',
                action: () => closeWindow('terminal')
            }
        };

        terminalWindow.addEventListener('keydown', (e) => {
            e.preventDefault();

            if (e.key === 'Enter') {
                appendToTerminal(`<p><span class="text-blue-400">guest@PortfolioOS:~$</span> ${currentCommand}</p>`);

                const parts = currentCommand.trim().split(' ').filter(p => p);
                const command = parts[0]?.toLowerCase();
                const args = parts.slice(1);

                if (command && commands[command]) {
                    commands[command].action(args);
                } else if (command) {
                    appendToTerminal(`<p class="text-red-400">Command not found: ${command}. Type 'help' for a list of commands.</p>`);
                }
                currentCommand = '';
            } else if (e.key === 'Backspace') {
                currentCommand = currentCommand.slice(0, -1);
            } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey) {
                currentCommand += e.key;
            }
            terminalInput.textContent = currentCommand;
        });

        // --- Window Management ---
        const windows = document.querySelectorAll('.window');
        let activeWindow = null;
        let highestZIndex = 10;
        let snapHideTimeout = null;
        let taskManagerInterval = null;

        function updateDesktopClockVisibility() {
            const clockWidget = document.getElementById('desktop-clock-widget');
            const anyWindowOpen = Array.from(windows).some(w => w.style.display === 'block');
            clockWidget.style.opacity = anyWindowOpen ? '0' : '1';
        }

        function updateDockIndicator(id, isActive) {
            const dockItem = document.getElementById(`dock-${id}`);
            if (dockItem) {
                if (isActive) {
                    dockItem.classList.add('active');
                } else {
                    dockItem.classList.remove('active');
                }
            }
        }

        function handleDockClick(id) {
            const windowEl = document.getElementById(`${id}-window`);
            const isVisible = windowEl.style.display === 'block';

            if (isVisible) {
                minimizeWindow(id);
            } else {
                openWindow(id);
            }
        }

        function resetApp(id) {
            const windowEl = document.getElementById(`${id}-window`);
            if (!windowEl) return;

            // Specific app state resets
            switch (id) {
                case 'contact':
                    document.getElementById('contact-form')?.reset();
                    break;
                case 'newsletter':
                    document.getElementById('newsletter-form')?.reset();
                    break;
                case 'chatbot':
                    chatbotMessages.innerHTML = '';
                    chatbotInput.value = '';
                    addChatMessage("Hello! I'm a bot. Ask me about Krish's skills, projects, or how to contact him.", 'bot');
                    break;
                case 'terminal':
                    resetTerminal();
                    break;
                case 'about':
                case 'achievements':
                case 'settings':
                case 'projects':
                case 'social':
                case 'about-portfolio':
                    windowEl.querySelector('.content').scrollTop = 0;
                    break;
                case 'blog':
                    windowEl.querySelector('.blog-post-list').scrollTop = 0;
                    windowEl.querySelector('.blog-content-area').scrollTop = 0;
                    break;
            }
        }

        function openWindow(id) {
            const windowEl = document.getElementById(id + '-window');
            if (windowEl) {
                resetApp(id); // Reset the app state before showing
                windowEl.classList.remove('minimized');
                windowEl.style.display = 'block';
                bringToFront(windowEl);
                updateDockIndicator(id, true);
                updateTaskManager();
                if (id === 'taskmanager' && !taskManagerInterval) {
                    taskManagerInterval = setInterval(updateTaskManager, 2000);
                }
                if (id === 'game') {
                    startGame();
                }
                updateDesktopClockVisibility();
            }
        }

        function closeWindow(id) {
            const windowEl = document.getElementById(id + '-window');
            if (windowEl) {
                windowEl.classList.remove('minimized');
                windowEl.style.display = 'none';
                updateDockIndicator(id, false);
                if (id === 'taskmanager' && taskManagerInterval) {
                    clearInterval(taskManagerInterval);
                    taskManagerInterval = null;
                }
                if (id === 'game') {
                    stopGame();
                }
                updateTaskManager();
                updateDesktopClockVisibility();
            }
        }

        function minimizeWindow(id) {
            const windowEl = document.getElementById(id + '-window');
            if (windowEl) {
                windowEl.style.display = 'none';
                windowEl.classList.add('minimized');
                if (id === 'taskmanager' && taskManagerInterval) {
                    clearInterval(taskManagerInterval);
                    taskManagerInterval = null;
                }
                if (id === 'game') {
                    stopGame();
                }
                updateTaskManager();
                updateDesktopClockVisibility();
            }
        }

        function maximizeWindow(id) {
            const windowEl = document.getElementById(id + '-window');
            const previousState = windowEl.dataset.previousState;

            if (previousState) { // Restore
                const [top, left, width, height] = previousState.split(',');
                windowEl.style.top = top;
                windowEl.style.left = left;
                windowEl.style.width = width;
                windowEl.style.height = height;
                delete windowEl.dataset.previousState;
            } else { // Maximize
                windowEl.dataset.previousState = `${windowEl.style.top},${windowEl.style.left},${windowEl.style.width},${windowEl.style.height}`;
                snapWindow(id, 'fullscreen');
            }
        }

        function snapWindow(id, layout) {
            const windowEl = document.getElementById(id + '-window');
            if (!windowEl) return;

            const topBarHeight = 48;
            let screenW = window.innerWidth;
            let screenH = window.innerHeight;
            let offsetX = 0;

            const targetH = screenH - topBarHeight;

            delete windowEl.dataset.previousState;

            switch (layout) {
                case 'fullscreen':
                    windowEl.style.top = `${topBarHeight}px`;
                    windowEl.style.left = `${offsetX}px`;
                    windowEl.style.width = `${screenW}px`;
                    windowEl.style.height = `${targetH}px`;
                    break;
                case 'left-half':
                    windowEl.style.top = `${topBarHeight}px`;
                    windowEl.style.left = `${offsetX}px`;
                    windowEl.style.width = `${screenW / 2}px`;
                    windowEl.style.height = `${targetH}px`;
                    break;
                case 'right-half':
                    windowEl.style.top = `${topBarHeight}px`;
                    windowEl.style.left = `${offsetX + (screenW / 2)}px`;
                    windowEl.style.width = `${screenW / 2}px`;
                    windowEl.style.height = `${targetH}px`;
                    break;
            }
        }

        function showSnap(id) {
            clearTimeout(snapHideTimeout);
            const windowEl = document.getElementById(`${id}-window`);
            const snapEl = document.getElementById(`snap-${id}`);
            if (snapEl && windowEl) {
                windowEl.style.overflow = 'visible';
                snapEl.style.display = 'grid';
            }
        }

        function hideSnap(id) {
            snapHideTimeout = setTimeout(() => {
                const windowEl = document.getElementById(`${id}-window`);
                const snapEl = document.getElementById(`snap-${id}`);
                if (snapEl && windowEl) {
                    snapEl.style.display = 'none';
                    windowEl.style.overflow = 'hidden';
                }
            }, 300);
        }

        function bringToFront(elmnt) {
            highestZIndex++;
            elmnt.style.zIndex = highestZIndex;
            activeWindow = elmnt;
            if (elmnt.id === 'terminal-window' || elmnt.id === 'game-window') {
                elmnt.focus();
            }
        }

        function makeDraggable(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const titleBar = elmnt.querySelector(".title-bar");
            const topBarHeight = 48;

            const dragMouseDown = (e) => {
                if (e.target.classList.contains('window-control') || e.target.closest('.snap-layouts') || e.target.classList.contains('resizer')) return;
                e = e || window.event;
                e.preventDefault();
                bringToFront(elmnt);
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.classList.add('is-dragging');
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            };

            if (titleBar) { titleBar.onmousedown = dragMouseDown; }

            const elementDrag = (e) => {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;

                let newTop = elmnt.offsetTop - pos2;
                let newLeft = elmnt.offsetLeft - pos1;

                if (newTop < topBarHeight) newTop = topBarHeight;
                if (newTop > window.innerHeight - titleBar.offsetHeight) newTop = window.innerHeight - titleBar.offsetHeight;
                if (newLeft < -(elmnt.offsetWidth - 40)) newLeft = -(elmnt.offsetWidth - 40);
                if (newLeft > window.innerWidth - 40) newLeft = window.innerWidth - 40;


                elmnt.style.top = newTop + "px";
                elmnt.style.left = newLeft + "px";
            };

            const closeDragElement = () => {
                elmnt.classList.remove('is-dragging');
                document.onmouseup = null;
                document.onmousemove = null;
            };
        }

        function makeResizable(elmnt) {
            const resizer = elmnt.querySelector('.resizer');
            if (!resizer) return;

            let original_w = 0;
            let original_h = 0;
            let original_x = 0;
            let original_y = 0;

            const resizeMouseDown = (e) => {
                e.preventDefault();
                original_w = parseFloat(getComputedStyle(elmnt, null).getPropertyValue('width').replace('px', ''));
                original_h = parseFloat(getComputedStyle(elmnt, null).getPropertyValue('height').replace('px', ''));
                original_x = e.pageX;
                original_y = e.pageY;
                window.addEventListener('mousemove', resizeMouseMove);
                window.addEventListener('mouseup', resizeMouseUp);
            };

            const resizeMouseMove = (e) => {
                const width = original_w + (e.pageX - original_x);
                const height = original_h + (e.pageY - original_y);
                if (width > 320) { // Min width
                    elmnt.style.width = width + 'px';
                }
                if (height > 200) { // Min height
                    elmnt.style.height = height + 'px';
                }
            };

            const resizeMouseUp = () => {
                window.removeEventListener('mousemove', resizeMouseMove);
                window.removeEventListener('mouseup', resizeMouseUp);
            };

            resizer.addEventListener('mousedown', resizeMouseDown);
        }

        // --- Start Menu ---
        const startButton = document.getElementById('start-button');
        const startMenu = document.getElementById('start-menu');
        const startMenuSearch = document.getElementById('start-menu-search');

        function toggleStartMenu() {
            if (startMenu.style.display === 'block') {
                startMenu.style.display = 'none';
            } else {
                startMenu.style.display = 'block';
                startMenuSearch.focus();
            }
        }

        startButton.addEventListener('click', (event) => {
            event.stopPropagation();
            toggleStartMenu();
        });

        startMenuSearch.addEventListener('keyup', () => {
            const filter = startMenuSearch.value.toUpperCase();
            const apps = document.querySelectorAll('#start-menu-apps .start-menu-item');
            apps.forEach(app => {
                const txtValue = app.textContent || app.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    app.style.display = "";
                } else {
                    app.style.display = "none";
                }
            });
        });

        window.addEventListener('click', (event) => {
            if (!bottomLeftControls.contains(event.target) && !startMenu.contains(event.target) && startMenu.style.display === 'block') {
                toggleStartMenu();
            }
        });

        // --- Blog App ---
        const blogPosts = [
            {
                id: 1,
                title: 'Intro to Quantum Computing',
                date: '2025-07-20',
                author: 'Krish Sharma',
                tags: ['quantum', 'computing', 'science'],
                imageUrl: 'https://images.unsplash.com/photo-1534723328310-e82dad3ee43f?q=80&w=2070&auto=format&fit=crop',
                content: `<p>Quantum computing represents a new paradigm in computation. Unlike classical computers that use bits (0s and 1s), quantum computers use qubits. A qubit can be a 0, a 1, or a superposition of both states simultaneously.</p><p>This property, along with entanglement, allows quantum computers to perform complex calculations much faster than their classical counterparts. For example, Shor's algorithm can factor large numbers exponentially faster, posing a threat to current encryption standards.</p>`
            },
            {
                id: 2,
                title: 'The Rise of AI/ML',
                date: '2025-07-15',
                author: 'Krish Sharma',
                tags: ['ai', 'ml', 'tech'],
                imageUrl: 'https://images.unsplash.com/photo-1599420186946-7b6fb4e297f0?q=80&w=1974&auto=format&fit=crop',
                content: `<p>Artificial Intelligence (AI) and Machine Learning (ML) are transforming industries. From natural language processing that powers voice assistants to computer vision in autonomous vehicles, AI is everywhere.</p><p>As a student, diving into libraries like TensorFlow and PyTorch is a great way to start. The field is vast, covering everything from simple linear regression to complex deep neural networks.</p>`
            },
            {
                id: 3,
                title: 'Why TailwindCSS is Awesome',
                date: '2025-07-10',
                author: 'Krish Sharma',
                tags: ['css', 'webdev', 'tailwind'],
                imageUrl: 'https://images.unsplash.com/photo-1617396900799-f4ec2b43c7ae?q=80&w=2070&auto=format&fit=crop',
                content: `<p>Tailwind CSS is a utility-first CSS framework that provides low-level utility classes to build custom designs without ever leaving your HTML. It's a different approach compared to component-based frameworks like Bootstrap or Foundation.</p><p>The main benefit is that you are not fighting with framework styles. You build your own components with the provided utilities, leading to highly customized and performant designs. It's a game-changer for modern web development.</p>`
            }
        ];

        const blogPostList = document.querySelector('.blog-post-list');
        const blogContentArea = document.querySelector('.blog-content-area');

        function displayBlogPost(id) {
            const post = blogPosts.find(p => p.id === id);
            if (post) {
                const tagsHTML = post.tags.map(tag => `<span class="blog-tag">#${tag}</span>`).join('');

                blogContentArea.innerHTML = `
                    <div class="blog-header" style="background-image: url('${post.imageUrl}'); background-size: cover; background-position: center;">
                        <div class="blog-header-content">
                            <h1>${post.title}</h1>
                            <div class="blog-meta">
                                <span>By ${post.author}</span>
                                <span>&bull;</span>
                                <span>${post.date}</span>
                            </div>
                        </div>
                    </div>
                    <article class="blog-article">
                        ${post.content}
                        <div class="blog-tags">
                            ${tagsHTML}
                        </div>
                    </article>
                `;
                document.querySelectorAll('.blog-post-list a').forEach(a => {
                    a.classList.toggle('active', parseInt(a.dataset.postId) === id);
                });
                blogContentArea.scrollTop = 0;
            }
        }

        // --- Task Manager ---
        function updateTaskManager() {
            const taskManagerWindow = document.getElementById('taskmanager-window');
            if (!taskManagerWindow || taskManagerWindow.style.display !== 'block') {
                return;
            }

            const processList = document.getElementById('taskmanager-list');
            processList.innerHTML = '';

            document.querySelectorAll('.window').forEach(win => {
                if (win.style.display === 'block' || win.classList.contains('minimized')) {
                    const id = win.id.replace('-window', '');
                    const name = win.querySelector('.title-bar span').textContent || `${id}.exe`;

                    const status = win.classList.contains('minimized') ? 'Minimized' : 'Running';
                    const cpu = (Math.random() * 5 + (id === 'terminal' ? 2 : 0)).toFixed(1) + '%';
                    const memory = (Math.random() * 50 + 30).toFixed(1) + ' MB';

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><i class="${win.querySelector('.title-bar i')?.className || 'fas fa-window-maximize'} mr-2"></i>${name}</td>
                        <td>${status}</td>
                        <td class="text-right">${cpu}</td>
                        <td class="text-right">${memory}</td>
                        <td><button class="end-task-btn" onclick="closeWindow('${id}')">End Task</button></td>
                    `;
                    processList.appendChild(row);
                }
            });
        }

        // --- Chatbot Functionality ---
        const chatbotForm = document.getElementById('chatbot-input-form');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotMessages = document.getElementById('chatbot-messages');

        const faqData = {
            "hello": "Hi there! 👋 I'm PortfolioOS bot, here to help you explore everything about Krish Sharma. Ask me about his skills, projects, background, or even what he's currently learning.",
            "hi": "Hello! 🙌 You can ask me anything related to Krish—his portfolio, achievements, coding skills, or career aspirations. Let's get started!",
            "hey": "Hey! 👋 Curious about Krish? I can guide you through his skills, projects, certifications, and how to connect with him.",
            "who are you": "I'm a smart assistant built right into Krish Sharma’s portfolio to help visitors like you learn about his journey, strengths, and digital work. Ask away!",
            "who is krish": "Krish Sharma is a BSc Computer Science student with a strong passion for building user-focused applications and exploring cutting-edge fields like AI/ML and Quantum Computing. You can learn more in the 'About Me' section.",
            "skills": "Krish is skilled in HTML, CSS, TailwindCSS, JavaScript, and Python. He also has hands-on experience with building AI/ML models and has explored the foundations of Quantum Computing. You’ll find more in the 'About Me' and 'Projects' windows.",
            "what technologies does krish use": "Krish regularly uses technologies like TailwindCSS, JavaScript, Python, Firebase, GitHub, and more. He’s also building experience in AI/ML frameworks like TensorFlow and PyTorch.",
            "projects": "Krish has developed several exciting projects, including:\n- 📊 TrendX, EcoScore\n- 🖥️ This custom OS-themed portfolio\nCheck the 'Projects' window for more awesome work!",
            "achievements": "Explore the 'Achievements' window for more!",
            "contact": "You can get in touch with Krish through the 'Contact' window. Just fill out the form or click on the email icon to send him a direct message.",
            "how to contact": "Open the 'Contact' window from the Start Menu or dock and fill in your name, email, and message. Krish will get back to you shortly!",
            "cv": "Krish’s CV is available via the PDF icon in the bottom dock. Click it to view or download the latest version.",
            "resume": "Krish’s CV is available via the PDF icon in the bottom dock. Click it to view or download the latest version.",
            "education": "Krish is currently pursuing a Bachelor of Science in Computer Science and is in his 2nd year. He has a deep interest in emerging technologies and research areas like AI and Quantum Computing.",
            "blog": "Krish occasionally writes about tech topics he’s exploring. Visit the 'Blog' window to read posts on TailwindCSS, Quantum Computing, and AI/ML trends.",
            "interests": "Beyond coding, Krish enjoys exploring how Artificial Intelligence and Quantum Computing intersect. He also loves music, movies, and he also make music beats (lofi).",
            "ai ml": "Krish is currently learning AI/ML.",
            "quantum computing": "Krish has a budding interest in Quantum Computing. He is learning about Qubits, Superposition, and how quantum logic differs from classical computation.",
            "theme": "Want to personalize the look? Head over to the 'Settings' window to change the theme, wallpaper, and accent color.",
            "what can you do": "I can help you explore Krish's skills, open different apps, suggest where to find his CV, and tell you about his background. Just ask me!",
            "start menu": "Click on the 🚀 icon at the bottom-left corner to open the Start Menu. From there, you can launch apps like 'About Me', 'Projects', 'Contact', 'Blog', and more!",
            "terminal": "The terminal is a fun and interactive way to explore commands in this portfolio. Open it from the dock or type 'run terminal' in the chat!",
            "task manager": "Yes, there’s even a Task Manager! You can open it to view running apps inside this virtual OS. Type 'taskmgr' or click the chart icon in the top bar.",
            "thanks": "You're welcome! 😊 Let me know if there's anything else you'd like to know about Krish.",
            "bye": "Goodbye! 👋 Feel free to come back anytime to learn more about Krish Sharma's journey and work.",
            "help": "You can ask me about Krish's skills, projects, achievements, or how to contact him. Just type your question or click on the icons in the dock to explore different sections.",
        };


        function addChatMessage(message, sender) {
            const messageEl = document.createElement('div');
            messageEl.className = `chat-message ${sender}`;
            messageEl.textContent = message;
            chatbotMessages.appendChild(messageEl);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function getBotResponse(userInput) {
            userInput = userInput.toLowerCase().trim();
            let bestMatch = null;
            let highestScore = 0;

            for (const keyword in faqData) {
                const score = userInput.includes(keyword) ? keyword.length : 0;
                if (score > highestScore) {
                    highestScore = score;
                    bestMatch = faqData[keyword];
                }
            }
            return bestMatch || "I'm not sure how to answer that. Try asking about 'skills', 'projects', or 'contact'.";
        }

        chatbotForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userInput = chatbotInput.value;
            if (!userInput) return;

            addChatMessage(userInput, 'user');
            chatbotInput.value = '';

            setTimeout(() => {
                const botResponse = getBotResponse(userInput);
                addChatMessage(botResponse, 'bot');
            }, 500);
        });

        // --- Snake Game ---
        const canvas = document.getElementById('snake-canvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const highScoreEl = document.getElementById('high-score');
        const gameOverText = document.getElementById('game-over-text');

        const gridSize = 20;
        let snake, food, score, highScore = 0, direction, gameLoop;

        function initGame() {
            snake = [{ x: 10, y: 10 }];
            food = {};
            score = 0;
            direction = 'right';
            placeFood();
            updateScore();
            gameOverText.style.display = 'none';
        }

        function placeFood() {
            food.x = Math.floor(Math.random() * (canvas.width / gridSize));
            food.y = Math.floor(Math.random() * (canvas.height / gridSize));
        }

        function updateScore() {
            scoreEl.textContent = `Score: ${score}`;
            if (score > highScore) {
                highScore = score;
                highScoreEl.textContent = `High Score: ${highScore}`;
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? 'hsl(190, 100%, 50%)' : 'hsl(190, 100%, 70%)';
                ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
            });

            ctx.fillStyle = 'hsl(340, 100%, 60%)';
            ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
        }

        function update() {
            const head = { ...snake[0] };
            switch (direction) {
                case 'up': head.y--; break;
                case 'down': head.y++; break;
                case 'left': head.x--; break;
                case 'right': head.x++; break;
            }

            if (head.x < 0 || head.x * gridSize >= canvas.width || head.y < 0 || head.y * gridSize >= canvas.height) {
                return gameOver();
            }

            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return gameOver();
                }
            }

            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                score++;
                updateScore();
                placeFood();
            } else {
                snake.pop();
            }

            draw();
        }

        function changeDirection(e) {
            const key = e.key;
            if ((key === 'ArrowUp' || key === 'w') && direction !== 'down') direction = 'up';
            else if ((key === 'ArrowDown' || key === 's') && direction !== 'up') direction = 'down';
            else if ((key === 'ArrowLeft' || key === 'a') && direction !== 'right') direction = 'left';
            else if ((key === 'ArrowRight' || key === 'd') && direction !== 'left') direction = 'right';
        }

        function gameOver() {
            stopGame();
            gameOverText.style.display = 'block';
            window.addEventListener('keydown', restartGame);
        }

        function restartGame(e) {
            if (e.key === 'Enter') {
                window.removeEventListener('keydown', restartGame);
                startGame();
            }
        }

        function startGame() {
            initGame();
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, 100);
            window.addEventListener('keydown', changeDirection);
        }

        function stopGame() {
            clearInterval(gameLoop);
            window.removeEventListener('keydown', changeDirection);
        }

        // --- BSOD Easter Egg ---
        function triggerBSOD() {
            const bsodScreen = document.getElementById('bsod-screen');
            bsodScreen.style.display = 'flex';
            setTimeout(() => {
                bsodScreen.style.display = 'none';
                window.location.reload();
            }, 5000);
        }

        // Initialize everything on load
        document.addEventListener('DOMContentLoaded', () => {
            // --- macOS Inspired Boot Screen Logic ---
            const loginScreen = document.getElementById('login-screen');
            const helloContainer = document.querySelector('.hello-container');
            const progressContainer = document.querySelector('.progress-container');
            const progressBar = document.querySelector('.progress-bar-inner');

            // 1. Show "hello"
            setTimeout(() => {
                helloContainer.classList.add('visible');
            }, 500);

            // 2. Hide "hello" and show progress bar
            setTimeout(() => {
                helloContainer.style.opacity = 0;
                progressContainer.classList.add('visible');
            }, 2500); // 500ms appear + 2000ms pause

            // 3. Fill progress bar
            setTimeout(() => {
                progressBar.style.width = '100%';
            }, 3000);

            // 4. Hide login screen and initialize OS
            setTimeout(() => {
                loginScreen.classList.add('hidden');
                initializeOS();
            }, 5300); // Wait for bar to fill + delay


            function initializeOS() {
                setInterval(updateClock, 1000);
                loadSettings();

                wallpapers.forEach(wp => {
                    const thumb = document.createElement('img');
                    thumb.src = wp.thumb;
                    thumb.alt = wp.id;
                    thumb.className = `wallpaper-thumb rounded-lg w-full h-16 object-cover`;
                    thumb.onclick = () => { applyWallpaper(wp.id); updateSettingsUI(); saveSettings(); };
                    wallpaperOptionsContainer.appendChild(thumb);
                });

                themeOptionsContainer.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => { applyTheme(btn.dataset.theme); updateSettingsUI(); saveSettings(); }));
                accentColorOptionsContainer.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => { applyAccentColor(btn.dataset.color); updateSettingsUI(); saveSettings(); }));
                fontOptionsContainer.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => { applyFont(btn.dataset.font); updateSettingsUI(); saveSettings(); }));
                timeFormatOptionsContainer.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => { applyTimeFormat(btn.dataset.format); updateSettingsUI(); saveSettings(); }));

                blurSlider.addEventListener('input', (e) => applyBlur(e.target.value));
                blurSlider.addEventListener('change', saveSettings);
                opacitySlider.addEventListener('input', (e) => applyOpacity(e.target.value));
                opacitySlider.addEventListener('change', saveSettings);

                resetButton.addEventListener('click', resetUI);
                document.getElementById('theme-toggle').addEventListener('click', () => {
                    const newTheme = currentSettings.theme === 'dark' ? 'light' : 'dark';
                    applyTheme(newTheme);
                    updateSettingsUI();
                    saveSettings();
                });

                document.querySelectorAll('.window').forEach(win => {
                    makeDraggable(win);
                    makeResizable(win);
                });

                const snapLayoutsHTML = `
                    <div class="snap-option" data-layout="left-half"><div class="snap-preview" style="top:2px;left:2px;width:calc(50% - 3px);height:calc(100% - 4px);"></div></div>
                    <div class="snap-option" data-layout="right-half"><div class="snap-preview" style="top:2px;right:2px;width:calc(50% - 3px);height:calc(100% - 4px);"></div></div>
                    <div class="snap-option" data-layout="top-left"><div class="snap-preview" style="top:2px;left:2px;width:calc(50% - 3px);height:calc(50% - 3px);"></div></div>
                    <div class="snap-option" data-layout="top-left"><div class="snap-preview" style="top:calc(50% + 1px);left:2px;width:calc(50% - 3px);height:calc(50% - 3px);"></div></div>
                `;
                document.querySelectorAll('.snap-layouts').forEach(el => {
                    el.innerHTML = snapLayoutsHTML;
                    const windowId = el.id.split('-')[1];
                    el.querySelectorAll('.snap-option').forEach(opt => {
                        opt.addEventListener('click', (e) => {
                            e.stopPropagation();
                            snapWindow(windowId, opt.dataset.layout);
                            hideSnap(windowId);
                        });
                    });

                    const parentControl = el.parentElement;
                    parentControl.addEventListener('mouseenter', () => showSnap(windowId));
                    parentControl.addEventListener('mouseleave', () => hideSnap(windowId));
                    el.addEventListener('mouseenter', () => clearTimeout(snapHideTimeout));
                    el.addEventListener('mouseleave', () => hideSnap(windowId));
                });

                // Populate Blog
                blogPosts.sort((a, b) => new Date(b.date) - new Date(a.date)).forEach(post => {
                    const link = document.createElement('a');
                    link.href = '#';
                    link.dataset.postId = post.id;
                    link.innerHTML = `
                        <h3 class="font-bold text-base mb-1">${post.title}</h3>
                        <p class="text-xs text-secondary post-meta">By ${post.author} &bull; ${post.date}</p>
                    `;
                    link.onclick = (e) => {
                        e.preventDefault();
                        displayBlogPost(post.id);
                    };
                    blogPostList.appendChild(link);
                });
                if (blogPosts.length > 0) {
                    displayBlogPost(blogPosts[0].id);
                }

                // Init Terminal
                resetTerminal();

                // Init Chatbot
                resetApp('chatbot');

                updateDesktopClockVisibility();
            }
        });
    </script>

</body>

</html>
